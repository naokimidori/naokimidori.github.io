<!DOCTYPE html><html lang="zh-CN"><head><meta name="generator" content="Hexo 3.9.0"><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><title>React Hookså­¦ä¹ ç¬”è®° | Vino</title><meta name="description" content="Hook æ˜¯ React 16.8 çš„æ–°å¢ç‰¹æ€§ã€‚å®ƒå¯ä»¥è®©ä½ åœ¨ä¸ç¼–å†™ class çš„æƒ…å†µä¸‹ä½¿ç”¨ state ä»¥åŠå…¶ä»–çš„ React ç‰¹æ€§,Hook æ˜¯ä¸€äº›å¯ä»¥è®©ä½ åœ¨å‡½æ•°ç»„ä»¶é‡Œâ€œé’©å…¥â€ React state åŠç”Ÿå‘½å‘¨æœŸç­‰ç‰¹æ€§çš„å‡½æ•°ã€‚Hook ä¸èƒ½åœ¨ class ç»„ä»¶ä¸­ä½¿ç”¨ â€”â€” è¿™ä½¿å¾—ä½ ä¸ä½¿ç”¨ class ä¹Ÿèƒ½ä½¿ç”¨ Reactã€‚"><meta name="keywords" content="React,React Hooks"><meta name="author" content="Vino"><meta name="copyright" content="Vino"><meta name="format-detection" content="telephone=no"><link rel="shortcut icon" href="/img/favicon.ico"><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@latest/css/font-awesome.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css"><meta http-equiv="x-dns-prefetch-control" content="on"><link rel="canonical" href="https://naokimidori.github.io/2019/10/19/10-React_Hookså­¦ä¹ ç¬”è®°/"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:title" content="React Hookså­¦ä¹ ç¬”è®°"><meta name="twitter:description" content="Hook æ˜¯ React 16.8 çš„æ–°å¢ç‰¹æ€§ã€‚å®ƒå¯ä»¥è®©ä½ åœ¨ä¸ç¼–å†™ class çš„æƒ…å†µä¸‹ä½¿ç”¨ state ä»¥åŠå…¶ä»–çš„ React ç‰¹æ€§,Hook æ˜¯ä¸€äº›å¯ä»¥è®©ä½ åœ¨å‡½æ•°ç»„ä»¶é‡Œâ€œé’©å…¥â€ React state åŠç”Ÿå‘½å‘¨æœŸç­‰ç‰¹æ€§çš„å‡½æ•°ã€‚Hook ä¸èƒ½åœ¨ class ç»„ä»¶ä¸­ä½¿ç”¨ â€”â€” è¿™ä½¿å¾—ä½ ä¸ä½¿ç”¨ class ä¹Ÿèƒ½ä½¿ç”¨ Reactã€‚"><meta name="twitter:image" content="http://ww1.sinaimg.cn/large/8347ed67ly1g83rt3e6ahj20m80ciaal.jpg"><meta property="og:type" content="article"><meta property="og:title" content="React Hookså­¦ä¹ ç¬”è®°"><meta property="og:url" content="https://naokimidori.github.io/2019/10/19/10-React_Hookså­¦ä¹ ç¬”è®°/"><meta property="og:site_name" content="Vino"><meta property="og:description" content="Hook æ˜¯ React 16.8 çš„æ–°å¢ç‰¹æ€§ã€‚å®ƒå¯ä»¥è®©ä½ åœ¨ä¸ç¼–å†™ class çš„æƒ…å†µä¸‹ä½¿ç”¨ state ä»¥åŠå…¶ä»–çš„ React ç‰¹æ€§,Hook æ˜¯ä¸€äº›å¯ä»¥è®©ä½ åœ¨å‡½æ•°ç»„ä»¶é‡Œâ€œé’©å…¥â€ React state åŠç”Ÿå‘½å‘¨æœŸç­‰ç‰¹æ€§çš„å‡½æ•°ã€‚Hook ä¸èƒ½åœ¨ class ç»„ä»¶ä¸­ä½¿ç”¨ â€”â€” è¿™ä½¿å¾—ä½ ä¸ä½¿ç”¨ class ä¹Ÿèƒ½ä½¿ç”¨ Reactã€‚"><meta property="og:image" content="http://ww1.sinaimg.cn/large/8347ed67ly1g83rt3e6ahj20m80ciaal.jpg"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><link rel="prev" title="JavaScriptåŸºç¡€æ•´ç†1" href="https://naokimidori.github.io/2019/11/20/11-JavaScriptåŸºç¡€æ•´ç†1/"><link rel="next" title="é«˜é˜¶å‡½æ•°ä¹‹map filter reduce" href="https://naokimidori.github.io/2019/10/10/09-é«˜é˜¶å‡½æ•°ä¹‹map-filter-reduce/"><link rel="dns-prefetch" href="https://hm.baidu.com"><script>var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?https://hm.baidu.com/hm.js?3a948728d368918df8a2e0e833e5c161";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();</script><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Titillium+Web"><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"search.xml","languages":{"hits_empty":"æ‰¾ä¸åˆ°æ‚¨æŸ¥è¯¢çš„å†…å®¹:${query}"}},
  translate: {"defaultEncoding":2,"translateDelay":0,"cookieDomain":"http://naoki.top","msgToTraditionalChinese":"ç¹","msgToSimplifiedChinese":"ç®€"},
  highlight_copy: 'true',
  copy: {
    success: 'å¤åˆ¶æˆåŠŸ',
    error: 'å¤åˆ¶é”™è¯¯',
    noSupport: 'æµè§ˆå™¨ä¸æ”¯æŒ'
  },
  bookmark: {
    title: 'æ·»åŠ ä¹¦ç­¾',
    message_prev: 'æŒ‰',
    message_next: 'é”®å°†æœ¬é¡µåŠ å…¥ä¹¦ç­¾'
  },
  runtime_unit: 'å¤©'

  
}</script></head><body><canvas class="fireworks"></canvas><i class="fa fa-arrow-right" id="toggle-sidebar" aria-hidden="true"></i><div class="auto_open" id="sidebar"><div class="sidebar-toc"><div class="sidebar-toc__title">ç›®å½•</div><div class="sidebar-toc__progress"><span class="progress-notice">ä½ å·²ç»è¯»äº†</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc__progress-bar"></div></div><div class="sidebar-toc__content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#âœ¨React-Hooks"><span class="toc-number">1.</span> <span class="toc-text">âœ¨React Hooks</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#å®˜ç½‘ä»‹ç»"><span class="toc-number">1.1.</span> <span class="toc-text">å®˜ç½‘ä»‹ç»</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ä»€ä¹ˆæ˜¯Hook"><span class="toc-number">1.2.</span> <span class="toc-text">ä»€ä¹ˆæ˜¯Hook?</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Hookå¸¦æ¥çš„å¥½å¤„"><span class="toc-number">1.3.</span> <span class="toc-text">Hookå¸¦æ¥çš„å¥½å¤„</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#å®˜ç½‘demo"><span class="toc-number">1.4.</span> <span class="toc-text">å®˜ç½‘demo</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ğŸ“Œ-State-Hook"><span class="toc-number">2.</span> <span class="toc-text">ğŸ“Œ State Hook</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#useStateåŠå…¶ç­‰ä»·çš„classç¤ºä¾‹"><span class="toc-number">2.1.</span> <span class="toc-text">useStateåŠå…¶ç­‰ä»·çš„classç¤ºä¾‹</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#è°ƒç”¨-useState-æ–¹æ³•çš„æ—¶å€™åšäº†ä»€ä¹ˆ"><span class="toc-number">2.1.1.</span> <span class="toc-text">è°ƒç”¨ useState æ–¹æ³•çš„æ—¶å€™åšäº†ä»€ä¹ˆ?</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#useState-éœ€è¦å“ªäº›å‚æ•°ï¼Ÿ"><span class="toc-number">2.1.2.</span> <span class="toc-text">useState éœ€è¦å“ªäº›å‚æ•°ï¼Ÿ</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#useState-æ–¹æ³•çš„è¿”å›å€¼æ˜¯ä»€ä¹ˆï¼Ÿ"><span class="toc-number">2.1.3.</span> <span class="toc-text">useState æ–¹æ³•çš„è¿”å›å€¼æ˜¯ä»€ä¹ˆï¼Ÿ</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#å£°æ˜è°ƒç”¨å¤šä¸ª-state-å˜é‡"><span class="toc-number">2.2.</span> <span class="toc-text">å£°æ˜è°ƒç”¨å¤šä¸ª state å˜é‡</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#reactæ˜¯æ€ä¹ˆä¿è¯å¤šä¸ªuseStateçš„ç›¸äº’ç‹¬ç«‹çš„ï¼Ÿ"><span class="toc-number">2.3.</span> <span class="toc-text">reactæ˜¯æ€ä¹ˆä¿è¯å¤šä¸ªuseStateçš„ç›¸äº’ç‹¬ç«‹çš„ï¼Ÿ</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#âš¡ï¸-Effect-Hook"><span class="toc-number">3.</span> <span class="toc-text">âš¡ï¸ Effect Hook</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#useEffectåŠå…¶ç­‰ä»·çš„classç¤ºä¾‹"><span class="toc-number">3.1.</span> <span class="toc-text">useEffectåŠå…¶ç­‰ä»·çš„classç¤ºä¾‹</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#æ¸…é™¤å‰¯ä½œç”¨"><span class="toc-number">3.2.</span> <span class="toc-text">æ¸…é™¤å‰¯ä½œç”¨</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#æ— éœ€æ¸…é™¤çš„-effect"><span class="toc-number">3.2.1.</span> <span class="toc-text">æ— éœ€æ¸…é™¤çš„ effect</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#éœ€è¦æ¸…é™¤çš„-effect"><span class="toc-number">3.2.2.</span> <span class="toc-text">éœ€è¦æ¸…é™¤çš„ effect</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#æ€ä¹ˆè·³è¿‡ä¸€äº›ä¸å¿…è¦çš„å‰¯ä½œç”¨å‡½æ•°"><span class="toc-number">3.2.3.</span> <span class="toc-text">æ€ä¹ˆè·³è¿‡ä¸€äº›ä¸å¿…è¦çš„å‰¯ä½œç”¨å‡½æ•°</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#è‡ªå®šä¹‰Hook"><span class="toc-number">4.</span> <span class="toc-text">è‡ªå®šä¹‰Hook</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#å‚è€ƒé“¾æ¥"><span class="toc-number">5.</span> <span class="toc-text">å‚è€ƒé“¾æ¥</span></a></li></ol></div></div></div><div id="content-outer"><div id="top-container" style="background-image: url(http://ww1.sinaimg.cn/large/8347ed67ly1g83rt3e6ahj20m80ciaal.jpg)"><div id="page-header"><span class="pull-left"> <a class="blog_title" id="site-name" href="/">Vino</a></span><div class="open toggle-menu pull-right"><div class="menu-icon-first"></div><div class="menu-icon-second"></div><div class="menu-icon-third"></div></div><div class="menu_mask"></div><span class="pull-right menus"><div class="mobile_author_icon"><img class="lozad" src="/img/24.jpeg" onerror="onerror=null;src='/img/friend_404.gif'"></div><div class="mobile_post_data"><div class="mobile_data_item text-center"><div class="mobile_data_link"><a href="/archives/"><div class="headline">æ–‡ç« </div><div class="length_num">13</div></a></div></div><div class="mobile_data_item text-center">      <div class="mobile_data_link"><a href="/tags/"><div class="headline">æ ‡ç­¾</div><div class="length_num">15</div></a></div></div><div class="mobile_data_item text-center">     <div class="mobile_data_link"><a href="/categories/"><div class="headline">åˆ†ç±»</div><div class="length_num">8</div></a></div></div></div><hr><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> é¦–é¡µ</span></a><a class="site-page" href="/archives/"><i class="fa-fw fa fa-archive"></i><span> æ—¶é—´è½´</span></a><a class="site-page" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> æ ‡ç­¾</span></a><a class="site-page" href="/categories/"><i class="fa-fw fa fa-folder-open"></i><span> åˆ†ç±»</span></a><a class="site-page" href="/gallery/"><i class="fa-fw fa fa-photo"></i><span> ç›¸å†Œ</span></a><a class="site-page" href="/about/"><i class="fa-fw fa fa-heart"></i><span> å…³äº</span></a><script>document.body.addEventListener('touchstart', function(){ });</script></div></span><span class="pull-right"><a class="site-page social-icon search"><i class="fa fa-search fa-fw"></i><span> æœç´¢</span></a></span></div><div id="post-info"><div id="post-title"><div class="posttitle">React Hookså­¦ä¹ ç¬”è®°</div></div><div id="post-meta"><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> å‘è¡¨äº 2019-10-19<span class="post-meta__separator">|</span><i class="fa fa-history" aria-hidden="true"></i> æ›´æ–°äº 2020-03-21</time><span class="post-meta__separator mobile_hidden">|</span><span class="mobile_hidden"><i class="fa fa-inbox post-meta__icon" aria-hidden="true"></i><a class="post-meta__categories" href="/categories/å‰ç«¯/">å‰ç«¯</a><i class="fa fa-angle-right" aria-hidden="true"></i><i class="fa fa-inbox post-meta__icon" aria-hidden="true"></i><a class="post-meta__categories" href="/categories/å‰ç«¯/React/">React</a></span><div class="post-meta-wordcount"><span>å­—æ•°æ€»è®¡: </span><span class="word-count">2k</span><span class="post-meta__separator">|</span><span>é˜…è¯»æ—¶é•¿: 7 åˆ†é’Ÿ</span><span class="post-meta__separator">|</span><span>é˜…è¯»é‡: </span><span id="busuanzi_value_page_pv"></span></div></div></div></div><div class="layout layout_post" id="content-inner">   <article id="post"><div class="article-container" id="post-content"><h2 id="âœ¨React-Hooks"><a href="#âœ¨React-Hooks" class="headerlink" title="âœ¨React Hooks"></a>âœ¨React Hooks</h2><h3 id="å®˜ç½‘ä»‹ç»"><a href="#å®˜ç½‘ä»‹ç»" class="headerlink" title="å®˜ç½‘ä»‹ç»"></a>å®˜ç½‘ä»‹ç»</h3><blockquote>
<p>Hook æ˜¯ React 16.8 çš„æ–°å¢ç‰¹æ€§ã€‚å®ƒå¯ä»¥è®©ä½ åœ¨ä¸ç¼–å†™ class çš„æƒ…å†µä¸‹ä½¿ç”¨ state ä»¥åŠå…¶ä»–çš„ React ç‰¹æ€§</p>
</blockquote>
<h3 id="ä»€ä¹ˆæ˜¯Hook"><a href="#ä»€ä¹ˆæ˜¯Hook" class="headerlink" title="ä»€ä¹ˆæ˜¯Hook?"></a>ä»€ä¹ˆæ˜¯Hook?</h3><blockquote>
<p>Hook æ˜¯ä¸€äº›å¯ä»¥è®©ä½ åœ¨å‡½æ•°ç»„ä»¶é‡Œâ€œé’©å…¥â€ React state åŠç”Ÿå‘½å‘¨æœŸç­‰ç‰¹æ€§çš„å‡½æ•°ã€‚Hook ä¸èƒ½åœ¨ class ç»„ä»¶ä¸­ä½¿ç”¨ â€”â€” è¿™ä½¿å¾—ä½ ä¸ä½¿ç”¨ class ä¹Ÿèƒ½ä½¿ç”¨ Reactã€‚</p>
</blockquote>
<blockquote>
<p>Hook åœ¨ class å†…éƒ¨æ˜¯ä¸èµ·ä½œç”¨çš„ã€‚ä½†å¯ä»¥ä½¿ç”¨å®ƒä»¬æ¥å–ä»£ class </p>
</blockquote>
<blockquote>
<p>hookså¯ä»¥åå¤å¤šæ¬¡ä½¿ç”¨ï¼Œç›¸äº’ç‹¬ç«‹ã€‚</p>
</blockquote>
<h3 id="Hookå¸¦æ¥çš„å¥½å¤„"><a href="#Hookå¸¦æ¥çš„å¥½å¤„" class="headerlink" title="Hookå¸¦æ¥çš„å¥½å¤„"></a>Hookå¸¦æ¥çš„å¥½å¤„</h3><ol>
<li>Hook ä½¿å¼€å‘è€…åœ¨æ— éœ€ä¿®æ”¹ç»„ä»¶ç»“æ„çš„æƒ…å†µä¸‹å¤ç”¨çŠ¶æ€é€»è¾‘</li>
<li>è§£å†³äº†åµŒå¥—åœ°ç‹±çš„é—®é¢˜</li>
<li>æ•´åˆç”Ÿå‘½å‘¨æœŸ</li>
<li>ä¸ä½¿ç”¨classä»è€Œè§£å†³äº†thisæŒ‡å‘é—®é¢˜</li>
</ol>
<h3 id="å®˜ç½‘demo"><a href="#å®˜ç½‘demo" class="headerlink" title="å®˜ç½‘demo"></a>å®˜ç½‘demo</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React, &#123; useState &#125; <span class="keyword">from</span> <span class="string">'react'</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Example</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">// å£°æ˜ä¸€ä¸ªæ–°çš„å«åš â€œcountâ€ çš„ state å˜é‡</span></span><br><span class="line">  <span class="keyword">const</span> [count, setCount] = useState(<span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">      &lt;p&gt;You clicked &#123;count&#125; times&lt;<span class="regexp">/p&gt;</span></span><br><span class="line"><span class="regexp">      &lt;button onClick=&#123;() =&gt; setCount(count + 1)&#125;&gt;</span></span><br><span class="line"><span class="regexp">        Click me</span></span><br><span class="line"><span class="regexp">      &lt;/</span>button&gt;</span><br><span class="line">    &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">  );</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br></pre></td></tr></table></figure>

<hr>
<h2 id="ğŸ“Œ-State-Hook"><a href="#ğŸ“Œ-State-Hook" class="headerlink" title="ğŸ“Œ State Hook"></a>ğŸ“Œ State Hook</h2><p><code>useState</code>å°±æ˜¯ä¸€ä¸ªreactè‡ªå¸¦çš„hookå‡½æ•°ã€‚</p>
<p><code>useState</code> ä¼šè¿”å›ä¸€å¯¹å€¼ï¼šå½“å‰çŠ¶æ€å’Œä¸€ä¸ªæ›´æ–°å®ƒçš„å‡½æ•°ï¼Œå¯ä»¥åœ¨äº‹ä»¶å¤„ç†å‡½æ•°ä¸­æˆ–å…¶ä»–ä¸€äº›åœ°æ–¹è°ƒç”¨è¿™ä¸ªå‡½æ•°ã€‚<code>useState</code> å”¯ä¸€çš„å‚æ•°å°±æ˜¯åˆå§‹ <code>state</code></p>
<h3 id="useStateåŠå…¶ç­‰ä»·çš„classç¤ºä¾‹"><a href="#useStateåŠå…¶ç­‰ä»·çš„classç¤ºä¾‹" class="headerlink" title="useStateåŠå…¶ç­‰ä»·çš„classç¤ºä¾‹"></a>useStateåŠå…¶ç­‰ä»·çš„classç¤ºä¾‹</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React, &#123; useState &#125; <span class="keyword">from</span> <span class="string">'react'</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Example</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">// å£°æ˜ä¸€ä¸ªå« "count" çš„ state å˜é‡</span></span><br><span class="line">  <span class="keyword">const</span> [count, setCount] = useState(<span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">      &lt;p&gt;You clicked &#123;count&#125; times&lt;<span class="regexp">/p&gt;</span></span><br><span class="line"><span class="regexp">      &lt;button onClick=&#123;() =&gt; setCount(count + 1)&#125;&gt;</span></span><br><span class="line"><span class="regexp">        Click me</span></span><br><span class="line"><span class="regexp">      &lt;/</span>button&gt;</span><br><span class="line">    &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">  );</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br></pre></td></tr></table></figure>

<p>ç­‰ä»·äº(class)</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Example</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">  <span class="keyword">constructor</span>(props) &#123;</span><br><span class="line">    <span class="keyword">super</span>(props);</span><br><span class="line">    <span class="keyword">this</span>.state = &#123;</span><br><span class="line">      count: <span class="number">0</span></span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  render() &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;div&gt;</span><br><span class="line">        &lt;p&gt;You clicked &#123;<span class="keyword">this</span>.state.count&#125; times&lt;<span class="regexp">/p&gt;</span></span><br><span class="line"><span class="regexp">        &lt;button onClick=&#123;() =&gt; this.setState(&#123; count: this.state.count + 1 &#125;)&#125;&gt;</span></span><br><span class="line"><span class="regexp">          Click me</span></span><br><span class="line"><span class="regexp">        &lt;/</span>button&gt;</span><br><span class="line">      &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">    );</span></span><br><span class="line"><span class="regexp">  &#125;</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br></pre></td></tr></table></figure>

<h4 id="è°ƒç”¨-useState-æ–¹æ³•çš„æ—¶å€™åšäº†ä»€ä¹ˆ"><a href="#è°ƒç”¨-useState-æ–¹æ³•çš„æ—¶å€™åšäº†ä»€ä¹ˆ" class="headerlink" title="è°ƒç”¨ useState æ–¹æ³•çš„æ—¶å€™åšäº†ä»€ä¹ˆ?"></a>è°ƒç”¨ useState æ–¹æ³•çš„æ—¶å€™åšäº†ä»€ä¹ˆ?</h4><ul>
<li>å®ƒå®šä¹‰ä¸€ä¸ª â€œstate å˜é‡â€,ç¤ºä¾‹ä¸­çš„å˜é‡ä¸º<code>count</code>ã€‚</li>
<li>ä¸ class é‡Œé¢çš„ <code>this.state</code> æä¾›çš„åŠŸèƒ½å®Œå…¨ç›¸åŒã€‚</li>
<li>èˆ¬æ¥è¯´ï¼Œåœ¨å‡½æ•°é€€å‡ºåå˜é‡å°±å°±ä¼šâ€æ¶ˆå¤±â€ï¼Œè€Œ state ä¸­çš„å˜é‡ä¼šè¢« React ä¿ç•™ã€‚</li>
</ul>
<h4 id="useState-éœ€è¦å“ªäº›å‚æ•°ï¼Ÿ"><a href="#useState-éœ€è¦å“ªäº›å‚æ•°ï¼Ÿ" class="headerlink" title="useState éœ€è¦å“ªäº›å‚æ•°ï¼Ÿ"></a>useState éœ€è¦å“ªäº›å‚æ•°ï¼Ÿ</h4><ul>
<li>seState() æ–¹æ³•é‡Œé¢å”¯ä¸€çš„å‚æ•°å°±æ˜¯åˆå§‹ state</li>
</ul>
<h4 id="useState-æ–¹æ³•çš„è¿”å›å€¼æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#useState-æ–¹æ³•çš„è¿”å›å€¼æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="useState æ–¹æ³•çš„è¿”å›å€¼æ˜¯ä»€ä¹ˆï¼Ÿ"></a>useState æ–¹æ³•çš„è¿”å›å€¼æ˜¯ä»€ä¹ˆï¼Ÿ</h4><ul>
<li>è¿”å›å€¼ä¸ºï¼šå½“å‰ state ä»¥åŠæ›´æ–° state çš„å‡½æ•°ã€‚</li>
</ul>
<h3 id="å£°æ˜è°ƒç”¨å¤šä¸ª-state-å˜é‡"><a href="#å£°æ˜è°ƒç”¨å¤šä¸ª-state-å˜é‡" class="headerlink" title="å£°æ˜è°ƒç”¨å¤šä¸ª state å˜é‡"></a>å£°æ˜è°ƒç”¨å¤šä¸ª state å˜é‡</h3><ol>
<li><code>useState</code>æ˜¯å¯ä»¥å¤šæ¬¡è°ƒç”¨çš„</li>
<li><code>useState</code>æ¥æ”¶çš„åˆå§‹å€¼æ²¡æœ‰è§„å®šä¸€å®šè¦æ˜¯<code>string</code>/<code>number</code>/<code>boolean</code>è¿™ç§ç®€å•æ•°æ®ç±»å‹ï¼Œå®ƒå®Œå…¨å¯ä»¥æ¥æ”¶å¯¹è±¡æˆ–è€…æ•°ç»„ä½œä¸ºå‚æ•°</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">ExampleWithManyStates</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">// å£°æ˜å¤šä¸ª state å˜é‡ï¼</span></span><br><span class="line">  <span class="keyword">const</span> [age, setAge] = useState(<span class="number">42</span>);</span><br><span class="line">  <span class="keyword">const</span> [fruit, setFruit] = useState(<span class="string">'banana'</span>);</span><br><span class="line">  <span class="keyword">const</span> [todos, setTodos] = useState([&#123; <span class="attr">text</span>: <span class="string">'Learn Hooks'</span> &#125;]);</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="reactæ˜¯æ€ä¹ˆä¿è¯å¤šä¸ªuseStateçš„ç›¸äº’ç‹¬ç«‹çš„ï¼Ÿ"><a href="#reactæ˜¯æ€ä¹ˆä¿è¯å¤šä¸ªuseStateçš„ç›¸äº’ç‹¬ç«‹çš„ï¼Ÿ" class="headerlink" title="reactæ˜¯æ€ä¹ˆä¿è¯å¤šä¸ªuseStateçš„ç›¸äº’ç‹¬ç«‹çš„ï¼Ÿ"></a>reactæ˜¯æ€ä¹ˆä¿è¯å¤šä¸ªuseStateçš„ç›¸äº’ç‹¬ç«‹çš„ï¼Ÿ</h3><blockquote>
<p>reactæ˜¯æ ¹æ®useStateå‡ºç°çš„é¡ºåºæ¥å®šçš„ã€‚</p>
</blockquote>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//ç¬¬ä¸€æ¬¡æ¸²æŸ“</span></span><br><span class="line">useState(<span class="number">42</span>);  <span class="comment">//å°†ageåˆå§‹åŒ–ä¸º42</span></span><br><span class="line">useState(<span class="string">'banana'</span>);  <span class="comment">//å°†fruitåˆå§‹åŒ–ä¸ºbanana</span></span><br><span class="line">useState([&#123; <span class="attr">text</span>: <span class="string">'Learn Hooks'</span> &#125;]); <span class="comment">//...</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//ç¬¬äºŒæ¬¡æ¸²æŸ“</span></span><br><span class="line">useState(<span class="number">42</span>);  <span class="comment">//è¯»å–çŠ¶æ€å˜é‡ageçš„å€¼ï¼ˆè¿™æ—¶å€™ä¼ çš„å‚æ•°42ç›´æ¥è¢«å¿½ç•¥ï¼‰</span></span><br><span class="line">useState(<span class="string">'banana'</span>);  <span class="comment">//è¯»å–çŠ¶æ€å˜é‡fruitçš„å€¼ï¼ˆè¿™æ—¶å€™ä¼ çš„å‚æ•°bananaç›´æ¥è¢«å¿½ç•¥ï¼‰</span></span><br><span class="line">useState([&#123; <span class="attr">text</span>: <span class="string">'Learn Hooks'</span> &#125;]); <span class="comment">//...</span></span><br></pre></td></tr></table></figure>

<p>æ”¹ä¸‹ä»£ç :</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> showFruit = <span class="literal">true</span>;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">ExampleWithManyStates</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> [age, setAge] = useState(<span class="number">42</span>);</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">if</span>(showFruit) &#123;</span><br><span class="line">    <span class="keyword">const</span> [fruit, setFruit] = useState(<span class="string">'banana'</span>);</span><br><span class="line">    showFruit = <span class="literal">false</span>;</span><br><span class="line">  &#125;</span><br><span class="line"> </span><br><span class="line">  <span class="keyword">const</span> [todos, setTodos] = useState([&#123; <span class="attr">text</span>: <span class="string">'Learn Hooks'</span> &#125;]);</span><br></pre></td></tr></table></figure>

<p>è¿™æ ·ä¸€æ¥:</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//ç¬¬ä¸€æ¬¡æ¸²æŸ“</span></span><br><span class="line">useState(<span class="number">42</span>);  <span class="comment">//å°†ageåˆå§‹åŒ–ä¸º42</span></span><br><span class="line">useState(<span class="string">'banana'</span>);  <span class="comment">//å°†fruitåˆå§‹åŒ–ä¸ºbanana</span></span><br><span class="line">useState([&#123; <span class="attr">text</span>: <span class="string">'Learn Hooks'</span> &#125;]); <span class="comment">//...</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//ç¬¬äºŒæ¬¡æ¸²æŸ“</span></span><br><span class="line">useState(<span class="number">42</span>);  <span class="comment">//è¯»å–çŠ¶æ€å˜é‡ageçš„å€¼ï¼ˆè¿™æ—¶å€™ä¼ çš„å‚æ•°42ç›´æ¥è¢«å¿½ç•¥ï¼‰</span></span><br><span class="line"><span class="comment">// useState('banana');  </span></span><br><span class="line">useState([&#123; <span class="attr">text</span>: <span class="string">'Learn Hooks'</span> &#125;]); <span class="comment">//è¯»å–åˆ°çš„å´æ˜¯çŠ¶æ€å˜é‡fruitçš„å€¼ï¼Œå¯¼è‡´æŠ¥é”™</span></span><br></pre></td></tr></table></figure>

<p>é‰´äºæ­¤ï¼Œreactè§„å®šå¿…é¡»æŠŠhookså†™åœ¨å‡½æ•°çš„æœ€å¤–å±‚ï¼Œä¸èƒ½å†™åœ¨ifelseç­‰æ¡ä»¶è¯­å¥å½“ä¸­ï¼Œæ¥ç¡®ä¿hooksçš„æ‰§è¡Œé¡ºåºä¸€è‡´ã€‚</p>
<hr>
<h2 id="âš¡ï¸-Effect-Hook"><a href="#âš¡ï¸-Effect-Hook" class="headerlink" title="âš¡ï¸ Effect Hook"></a>âš¡ï¸ Effect Hook</h2><p>ä¹‹å‰å†™çš„æœ‰çŠ¶æ€ç»„ä»¶(class)ï¼Œé€šå¸¸ä¼šäº§ç”Ÿå¾ˆå¤šçš„å‰¯ä½œç”¨ï¼ˆside effectï¼‰ï¼Œæ¯”å¦‚å‘èµ·ajaxè¯·æ±‚è·å–æ•°æ®ï¼Œæ·»åŠ ä¸€äº›ç›‘å¬çš„æ³¨å†Œå’Œå–æ¶ˆæ³¨å†Œï¼Œæ‰‹åŠ¨ä¿®æ”¹domç­‰ç­‰ã€‚ä¹‹å‰éƒ½æŠŠè¿™äº›å‰¯ä½œç”¨çš„å‡½æ•°å†™åœ¨ç”Ÿå‘½å‘¨æœŸå‡½æ•°é’©å­é‡Œï¼Œæ¯”å¦‚<code>componentDidMount</code>ï¼Œ<code>componentDidUpdate</code>å’Œ<code>componentWillUnmount</code>ã€‚è€Œç°åœ¨çš„<code>useEffect</code>å°±ç›¸å½“ä¸è¿™äº›å£°æ˜å‘¨æœŸå‡½æ•°é’©å­çš„é›†åˆä½“ã€‚</p>
<p>React å°†æŒ‰ç…§ effect å£°æ˜çš„é¡ºåºä¾æ¬¡è°ƒç”¨ç»„ä»¶ä¸­çš„æ¯ä¸€ä¸ª effectã€‚</p>
<h3 id="useEffectåŠå…¶ç­‰ä»·çš„classç¤ºä¾‹"><a href="#useEffectåŠå…¶ç­‰ä»·çš„classç¤ºä¾‹" class="headerlink" title="useEffectåŠå…¶ç­‰ä»·çš„classç¤ºä¾‹"></a>useEffectåŠå…¶ç­‰ä»·çš„classç¤ºä¾‹</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React, &#123; useState, useEffect &#125; <span class="keyword">from</span> <span class="string">'react'</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Example</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> [count, setCount] = useState(<span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">  useEffect(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// æ›´æ–°æ ‡é¢˜</span></span><br><span class="line">    <span class="built_in">document</span>.title = <span class="string">`You clicked <span class="subst">$&#123;count&#125;</span> times`</span>;</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> (</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">      &lt;p&gt;You clicked &#123;count&#125; times&lt;<span class="regexp">/p&gt;</span></span><br><span class="line"><span class="regexp">      &lt;button onClick=&#123;() =&gt; setCount(count + 1)&#125;&gt;</span></span><br><span class="line"><span class="regexp">        Click me</span></span><br><span class="line"><span class="regexp">      &lt;/</span>button&gt;</span><br><span class="line">    &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">  );</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br></pre></td></tr></table></figure>

<p>ç­‰ä»·äº(class)</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Example</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">  <span class="keyword">constructor</span>(props) &#123;</span><br><span class="line">    <span class="keyword">super</span>(props);</span><br><span class="line">    <span class="keyword">this</span>.state = &#123;</span><br><span class="line">      count: <span class="number">0</span></span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  componentDidMount() &#123;</span><br><span class="line">    <span class="built_in">document</span>.title = <span class="string">`You clicked <span class="subst">$&#123;<span class="keyword">this</span>.state.count&#125;</span> times`</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  componentDidUpdate() &#123;</span><br><span class="line">    <span class="built_in">document</span>.title = <span class="string">`You clicked <span class="subst">$&#123;<span class="keyword">this</span>.state.count&#125;</span> times`</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  render() &#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">      &lt;div&gt;</span><br><span class="line">        &lt;p&gt;You clicked &#123;<span class="keyword">this</span>.state.count&#125; times&lt;<span class="regexp">/p&gt;</span></span><br><span class="line"><span class="regexp">        &lt;button onClick=&#123;() =&gt; this.setState(&#123; count: this.state.count + 1 &#125;)&#125;&gt;</span></span><br><span class="line"><span class="regexp">          Click me</span></span><br><span class="line"><span class="regexp">        &lt;/</span>button&gt;</span><br><span class="line">      &lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">    );</span></span><br><span class="line"><span class="regexp">  &#125;</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br></pre></td></tr></table></figure>

<p>æ¢³ç†é€»è¾‘:<br>é¦–å…ˆï¼Œå£°æ˜äº†ä¸€ä¸ªçŠ¶æ€å˜é‡<code>count</code>ï¼Œå°†å®ƒçš„åˆå§‹å€¼è®¾ä¸º0ã€‚ç„¶åå‘Šè¯‰reactï¼Œè¿™ä¸ªç»„ä»¶æœ‰ä¸€ä¸ªå‰¯ä½œç”¨ã€‚ç»™<code>useEffect hook</code>ä¼ äº†ä¸€ä¸ªåŒ¿åå‡½æ•°ï¼Œè¿™ä¸ªåŒ¿åå‡½æ•°å°±æ˜¯å‰¯ä½œç”¨ã€‚åœ¨è¿™ä¸ªä¾‹å­é‡Œï¼Œå‰¯ä½œç”¨æ˜¯è°ƒç”¨browser APIæ¥ä¿®æ”¹æ–‡æ¡£æ ‡é¢˜ã€‚å½“reactè¦æ¸²æŸ“ç»„ä»¶æ—¶ï¼Œå®ƒä¼šå…ˆè®°ä½ç”¨åˆ°çš„å‰¯ä½œç”¨ã€‚ç­‰reactæ›´æ–°äº†DOMä¹‹åï¼Œå®ƒå†ä¾æ¬¡æ‰§è¡Œå®šä¹‰çš„å‰¯ä½œç”¨å‡½æ•°ã€‚</p>
<p>è¿™é‡Œè¦æ³¨æ„å‡ ç‚¹ï¼š<br>ç¬¬ä¸€ï¼Œreacté¦–æ¬¡æ¸²æŸ“å’Œä¹‹åçš„æ¯æ¬¡æ¸²æŸ“éƒ½ä¼šè°ƒç”¨ä¸€éä¼ ç»™<code>useEffect</code>çš„å‡½æ•°ã€‚è€Œä¹‹å‰è¦ç”¨ä¸¤ä¸ªå£°æ˜å‘¨æœŸå‡½æ•°æ¥åˆ†åˆ«è¡¨ç¤ºé¦–æ¬¡æ¸²æŸ“<code>componentDidMount</code>ï¼Œå’Œä¹‹åçš„æ›´æ–°å¯¼è‡´çš„é‡æ–°æ¸²æŸ“<code>componentDidUpdate</code>ã€‚</p>
<p>ç¬¬äºŒï¼ŒuseEffectä¸­å®šä¹‰çš„å‰¯ä½œç”¨å‡½æ•°çš„æ‰§è¡Œä¸ä¼šé˜»ç¢æµè§ˆå™¨æ›´æ–°è§†å›¾ï¼Œä¹Ÿå°±æ˜¯è¯´è¿™äº›å‡½æ•°æ˜¯<strong>å¼‚æ­¥æ‰§è¡Œ</strong>çš„ï¼Œè€Œä¹‹å‰çš„componentDidMountæˆ–componentDidUpdateä¸­çš„ä»£ç åˆ™æ˜¯åŒæ­¥æ‰§è¡Œçš„ã€‚è¿™ç§å®‰æ’å¯¹å¤§å¤šæ•°å‰¯ä½œç”¨è¯´éƒ½æ˜¯åˆç†çš„ï¼Œä½†æœ‰çš„æƒ…å†µé™¤å¤–ï¼Œæ¯”å¦‚æœ‰æ—¶å€™éœ€è¦å…ˆæ ¹æ®DOMè®¡ç®—å‡ºæŸä¸ªå…ƒç´ çš„å°ºå¯¸å†é‡æ–°æ¸²æŸ“ï¼Œè¿™æ—¶å€™å¸Œæœ›è¿™æ¬¡é‡æ–°æ¸²æŸ“æ˜¯åŒæ­¥å‘ç”Ÿçš„ï¼Œä¹Ÿå°±æ˜¯è¯´å®ƒä¼šåœ¨æµè§ˆå™¨çœŸçš„å»ç»˜åˆ¶è¿™ä¸ªé¡µé¢å‰å‘ç”Ÿã€‚</p>
<h3 id="æ¸…é™¤å‰¯ä½œç”¨"><a href="#æ¸…é™¤å‰¯ä½œç”¨" class="headerlink" title="æ¸…é™¤å‰¯ä½œç”¨"></a>æ¸…é™¤å‰¯ä½œç”¨</h3><p>åœ¨ React ç»„ä»¶ä¸­æœ‰ä¸¤ç§å¸¸è§å‰¯ä½œç”¨æ“ä½œï¼šéœ€è¦æ¸…é™¤çš„å’Œä¸éœ€è¦æ¸…é™¤çš„ã€‚å…ˆæ¥æ›´ä»”ç»†åœ°çœ‹ä¸€ä¸‹å®ƒä»¬ä¹‹é—´çš„åŒºåˆ«ã€‚</p>
<h4 id="æ— éœ€æ¸…é™¤çš„-effect"><a href="#æ— éœ€æ¸…é™¤çš„-effect" class="headerlink" title="æ— éœ€æ¸…é™¤çš„ effect"></a>æ— éœ€æ¸…é™¤çš„ effect</h4><blockquote>
<p>æœ‰æ—¶å€™ï¼Œæƒ³åœ¨ React æ›´æ–° DOMä¹‹åè¿è¡Œä¸€äº›é¢å¤–çš„ä»£ç ã€‚æ¯”å¦‚å‘é€ç½‘ç»œè¯·æ±‚ï¼Œæ‰‹åŠ¨å˜æ›´ DOMï¼Œè®°å½•æ—¥å¿—ï¼Œè¿™äº›éƒ½æ˜¯å¸¸è§çš„æ— éœ€æ¸…é™¤çš„æ“ä½œã€‚å› ä¸ºåœ¨æ‰§è¡Œå®Œè¿™äº›æ“ä½œä¹‹åï¼Œå°±å¯ä»¥å¿½ç•¥ä»–ä»¬äº†ã€‚</p>
</blockquote>
<p>ä¾‹å¦‚ä¹‹å‰çš„ç¤ºä¾‹å°±æ˜¯æ— éœ€æ¸…é™¤çš„ effect</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">useEffect(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">document</span>.title = <span class="string">`You clicked <span class="subst">$&#123;count&#125;</span> times`</span>;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h4 id="éœ€è¦æ¸…é™¤çš„-effect"><a href="#éœ€è¦æ¸…é™¤çš„-effect" class="headerlink" title="éœ€è¦æ¸…é™¤çš„ effect"></a>éœ€è¦æ¸…é™¤çš„ effect</h4><p>ä¸ºäº†é˜²æ­¢å¼•èµ·å†…å­˜æ³„éœ²ï¼Œéœ€è¦æ¸…é™¤ effectã€‚ä¾‹å¦‚ï¼šè®¢é˜…å¤–éƒ¨æ•°æ®æº </p>
<p>åœ¨React class ä¸­ä¸€èˆ¬åœ¨<code>componentWillUnmount</code>è¿™ä¸ªç”Ÿå‘½é’©å­ä¸­æ¸…é™¤</p>
<p><code>useEffect</code> å¯ä»¥åœ¨ç»„ä»¶æ¸²æŸ“åå®ç°å„ç§ä¸åŒçš„å‰¯ä½œç”¨ã€‚æœ‰äº›å‰¯ä½œç”¨å¯èƒ½éœ€è¦æ¸…é™¤ï¼Œæ‰€ä»¥éœ€è¦è¿”å›ä¸€ä¸ªå‡½æ•°ï¼Œå¦‚ä¸‹ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">useEffect(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">handleStatusChange</span>(<span class="params">status</span>) </span>&#123;</span><br><span class="line">      setIsOnline(status.isOnline);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    ChatAPI.subscribeToFriendStatus(props.friend.id, handleStatusChange);</span><br><span class="line">    <span class="keyword">return</span> <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">      ChatAPI.unsubscribeFromFriendStatus(props.friend.id, handleStatusChange);</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h4 id="æ€ä¹ˆè·³è¿‡ä¸€äº›ä¸å¿…è¦çš„å‰¯ä½œç”¨å‡½æ•°"><a href="#æ€ä¹ˆè·³è¿‡ä¸€äº›ä¸å¿…è¦çš„å‰¯ä½œç”¨å‡½æ•°" class="headerlink" title="æ€ä¹ˆè·³è¿‡ä¸€äº›ä¸å¿…è¦çš„å‰¯ä½œç”¨å‡½æ•°"></a>æ€ä¹ˆè·³è¿‡ä¸€äº›ä¸å¿…è¦çš„å‰¯ä½œç”¨å‡½æ•°</h4><p>åªéœ€è¦ç»™useEffectä¼ ç¬¬äºŒä¸ªå‚æ•°å³å¯.</p>
<p>ç”¨ç¬¬äºŒä¸ªå‚æ•°æ¥å‘Šè¯‰reactåªæœ‰å½“è¿™ä¸ªå‚æ•°çš„å€¼å‘ç”Ÿæ”¹å˜æ—¶ï¼Œæ‰æ‰§è¡Œæˆ‘å‰¯ä½œç”¨å‡½æ•°ï¼ˆç¬¬ä¸€ä¸ªå‚æ•°ï¼‰</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">useEffect(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">document</span>.title = <span class="string">`You clicked <span class="subst">$&#123;count&#125;</span> times`</span>;</span><br><span class="line">&#125;, [count]); <span class="comment">// åªæœ‰å½“countçš„å€¼å‘ç”Ÿå˜åŒ–æ—¶ï¼Œæ‰ä¼šé‡æ–°æ‰§è¡Œ`document.title`è¿™ä¸€å¥</span></span><br></pre></td></tr></table></figure>

<h2 id="è‡ªå®šä¹‰Hook"><a href="#è‡ªå®šä¹‰Hook" class="headerlink" title="è‡ªå®šä¹‰Hook"></a>è‡ªå®šä¹‰Hook</h2><p>å¾…ç»­â€¦</p>
<h2 id="å‚è€ƒé“¾æ¥"><a href="#å‚è€ƒé“¾æ¥" class="headerlink" title="å‚è€ƒé“¾æ¥"></a>å‚è€ƒé“¾æ¥</h2><ol>
<li><a href="https://juejin.im/post/5be3ea136fb9a049f9121014" target="_blank" rel="noopener">30åˆ†é’Ÿç²¾é€šReact Hooks</a></li>
<li><a href="https://react-1251415695.cos-website.ap-chengdu.myqcloud.com/docs/hooks-intro.html" target="_blank" rel="noopener">å®˜ç½‘æ–‡æ¡£</a></li>
</ol>
</div></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">æ–‡ç« ä½œè€…: </span><span class="post-copyright-info"><a href="mailto:undefined">Vino</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">æ–‡ç« é“¾æ¥: </span><span class="post-copyright-info"><a href="https://naokimidori.github.io/2019/10/19/10-React_Hookså­¦ä¹ ç¬”è®°/">https://naokimidori.github.io/2019/10/19/10-React_Hookså­¦ä¹ ç¬”è®°/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">ç‰ˆæƒå£°æ˜: </span><span class="post-copyright-info">æœ¬åšå®¢æ‰€æœ‰æ–‡ç« é™¤ç‰¹åˆ«å£°æ˜å¤–ï¼Œå‡é‡‡ç”¨ <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a> è®¸å¯åè®®ã€‚è½¬è½½è¯·æ³¨æ˜æ¥è‡ª <a href="https://naokimidori.github.io">Vino</a>ï¼</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/React/">React    </a><a class="post-meta__tags" href="/tags/React-Hooks/">React Hooks    </a></div><div class="post_share"></div></div><div class="post-reward"><a class="reward-buttom"><i class="fa fa-qrcode"></i> æ‰“èµ<div class="reward-main"><ul class="reward-all"><li class="reward-item"><img class="lozad post-qr-code__img" src="/img/wechat.jpg"><div class="post-qr-code__desc">å¾®ä¿¡</div></li><li class="reward-item"><img class="lozad post-qr-code__img" src="/img/alipay.jpg"><div class="post-qr-code__desc">æ”¯ä»˜å®</div></li></ul></div></a></div><nav class="pagination_post" id="pagination"><div class="prev-post pull-left"><a href="/2019/11/20/11-JavaScriptåŸºç¡€æ•´ç†1/"><img class="prev_cover lozad" data-src="https://s1.ax1x.com/2020/03/29/GETWQ0.png" onerror="onerror=null;src='/img/404.jpg'"><div class="label">ä¸Šä¸€ç¯‡</div><div class="prev_info"><span>JavaScriptåŸºç¡€æ•´ç†1</span></div></a></div><div class="next-post pull-right"><a href="/2019/10/10/09-é«˜é˜¶å‡½æ•°ä¹‹map-filter-reduce/"><img class="next_cover lozad" data-src="http://ww1.sinaimg.cn/large/8347ed67ly1g83rfo47pjj20e80e8jre.jpg" onerror="onerror=null;src='/img/404.jpg'"><div class="label">ä¸‹ä¸€ç¯‡</div><div class="next_info"><span>é«˜é˜¶å‡½æ•°ä¹‹map filter reduce</span></div></a></div></nav><hr><div id="post-comment"><div class="comment_headling"><i class="fa fa-comments fa-fw" aria-hidden="true"></i><span> è¯„è®º</span></div><div class="vcomment" id="vcomment"></div><script src="https://cdn.jsdelivr.net/npm/valine/dist/Valine.min.js"></script><script>var notify = false == true ? true : false;
var verify = false == true ? true : false;
var GUEST_INFO = ['nick','mail','link'];
var guest_info = 'æ˜µç§°,é‚®ç®±,website'.split(',').filter(function(item){
  return GUEST_INFO.indexOf(item) > -1
});
guest_info = guest_info.length == 0 ? GUEST_INFO :guest_info;

window.valine = new Valine({
  el:'#vcomment',
  notify:notify,
  verify:verify,
  appId:'z4FC6IHQeTaLgBAUlKy2Xaex-gzGzoHsz',
  appKey:'sTfmAokQvcI5kxOIJfMF73b5',
  placeholder:'ç•™ä¸‹ä½ çš„è¶³è¿¹å§!',
  avatar:'wavatar',
  guest_info:guest_info,
  pageSize:'10',
  lang:'zh-cn',
  recordIP: true
});</script></div></div></div><footer><div class="layout" id="footer"><div class="copyright">&copy;2018 - 2020 By Vino</div><div class="footer_custom_text">Keep Calm and Carry On</div></div></footer><i class="fa fa-arrow-up" id="go-up" aria-hidden="true"></i><section class="rightside" id="rightside"><a id="to_comment" href="#post-comment"><i class="scroll_to_comment fa fa-comments"></i></a><i class="fa fa-book" id="readmode" title="é˜…è¯»æ¨¡å¼"> </i><i class="fa fa-plus" id="font_plus" title="æ”¾å¤§å­—ä½“"></i><i class="fa fa-minus" id="font_minus" title="ç¼©å°å­—ä½“"></i><a class="translate_chn_to_cht" id="translateLink" href="javascript:translatePage();" title="ç®€ç¹è½¬æ¢">ç®€</a><i class="fa fa-moon-o nightshift" id="nightshift" title="å¤œé—´æ¨¡å¼"></i></section><div id="post_bottom"><div id="post_bottom_items"><a id="mobile_to_comment" href="#post-comment"><i class="mobile_scroll_to_comment fa fa-comments"></i></a><i class="fa fa-list" id="mobile_toc"></i><div id="toc_mobile"><div class="toc_mobile_headline">ç›®å½•</div><ol class="toc_mobile_items"><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#âœ¨React-Hooks"><span class="toc_mobile_items-number">1.</span> <span class="toc_mobile_items-text">âœ¨React Hooks</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#å®˜ç½‘ä»‹ç»"><span class="toc_mobile_items-number">1.1.</span> <span class="toc_mobile_items-text">å®˜ç½‘ä»‹ç»</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#ä»€ä¹ˆæ˜¯Hook"><span class="toc_mobile_items-number">1.2.</span> <span class="toc_mobile_items-text">ä»€ä¹ˆæ˜¯Hook?</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#Hookå¸¦æ¥çš„å¥½å¤„"><span class="toc_mobile_items-number">1.3.</span> <span class="toc_mobile_items-text">Hookå¸¦æ¥çš„å¥½å¤„</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#å®˜ç½‘demo"><span class="toc_mobile_items-number">1.4.</span> <span class="toc_mobile_items-text">å®˜ç½‘demo</span></a></li></ol></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#ğŸ“Œ-State-Hook"><span class="toc_mobile_items-number">2.</span> <span class="toc_mobile_items-text">ğŸ“Œ State Hook</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#useStateåŠå…¶ç­‰ä»·çš„classç¤ºä¾‹"><span class="toc_mobile_items-number">2.1.</span> <span class="toc_mobile_items-text">useStateåŠå…¶ç­‰ä»·çš„classç¤ºä¾‹</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#è°ƒç”¨-useState-æ–¹æ³•çš„æ—¶å€™åšäº†ä»€ä¹ˆ"><span class="toc_mobile_items-number">2.1.1.</span> <span class="toc_mobile_items-text">è°ƒç”¨ useState æ–¹æ³•çš„æ—¶å€™åšäº†ä»€ä¹ˆ?</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#useState-éœ€è¦å“ªäº›å‚æ•°ï¼Ÿ"><span class="toc_mobile_items-number">2.1.2.</span> <span class="toc_mobile_items-text">useState éœ€è¦å“ªäº›å‚æ•°ï¼Ÿ</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#useState-æ–¹æ³•çš„è¿”å›å€¼æ˜¯ä»€ä¹ˆï¼Ÿ"><span class="toc_mobile_items-number">2.1.3.</span> <span class="toc_mobile_items-text">useState æ–¹æ³•çš„è¿”å›å€¼æ˜¯ä»€ä¹ˆï¼Ÿ</span></a></li></ol></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#å£°æ˜è°ƒç”¨å¤šä¸ª-state-å˜é‡"><span class="toc_mobile_items-number">2.2.</span> <span class="toc_mobile_items-text">å£°æ˜è°ƒç”¨å¤šä¸ª state å˜é‡</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#reactæ˜¯æ€ä¹ˆä¿è¯å¤šä¸ªuseStateçš„ç›¸äº’ç‹¬ç«‹çš„ï¼Ÿ"><span class="toc_mobile_items-number">2.3.</span> <span class="toc_mobile_items-text">reactæ˜¯æ€ä¹ˆä¿è¯å¤šä¸ªuseStateçš„ç›¸äº’ç‹¬ç«‹çš„ï¼Ÿ</span></a></li></ol></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#âš¡ï¸-Effect-Hook"><span class="toc_mobile_items-number">3.</span> <span class="toc_mobile_items-text">âš¡ï¸ Effect Hook</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#useEffectåŠå…¶ç­‰ä»·çš„classç¤ºä¾‹"><span class="toc_mobile_items-number">3.1.</span> <span class="toc_mobile_items-text">useEffectåŠå…¶ç­‰ä»·çš„classç¤ºä¾‹</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-3"><a class="toc_mobile_items-link" href="#æ¸…é™¤å‰¯ä½œç”¨"><span class="toc_mobile_items-number">3.2.</span> <span class="toc_mobile_items-text">æ¸…é™¤å‰¯ä½œç”¨</span></a><ol class="toc_mobile_items-child"><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#æ— éœ€æ¸…é™¤çš„-effect"><span class="toc_mobile_items-number">3.2.1.</span> <span class="toc_mobile_items-text">æ— éœ€æ¸…é™¤çš„ effect</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#éœ€è¦æ¸…é™¤çš„-effect"><span class="toc_mobile_items-number">3.2.2.</span> <span class="toc_mobile_items-text">éœ€è¦æ¸…é™¤çš„ effect</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-4"><a class="toc_mobile_items-link" href="#æ€ä¹ˆè·³è¿‡ä¸€äº›ä¸å¿…è¦çš„å‰¯ä½œç”¨å‡½æ•°"><span class="toc_mobile_items-number">3.2.3.</span> <span class="toc_mobile_items-text">æ€ä¹ˆè·³è¿‡ä¸€äº›ä¸å¿…è¦çš„å‰¯ä½œç”¨å‡½æ•°</span></a></li></ol></li></ol></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#è‡ªå®šä¹‰Hook"><span class="toc_mobile_items-number">4.</span> <span class="toc_mobile_items-text">è‡ªå®šä¹‰Hook</span></a></li><li class="toc_mobile_items-item toc_mobile_items-level-2"><a class="toc_mobile_items-link" href="#å‚è€ƒé“¾æ¥"><span class="toc_mobile_items-number">5.</span> <span class="toc_mobile_items-text">å‚è€ƒé“¾æ¥</span></a></li></ol></div></div></div><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js"></script><script src="https://cdn.jsdelivr.net/npm/js-cookie@2/src/js.cookie.min.js"></script><script src="/js/utils.js"></script><script src="/js/main.js"></script><script async src="/js/search/local-search.js"></script><script src="https://cdn.jsdelivr.net/npm/animejs@latest/anime.min.js"></script><script src="/js/third-party/fireworks.js"></script><script src="/js/nightshift.js"></script><script id="ribbon" src="https://cdn.jsdelivr.net/gh/jerryc127/CDN@latest/js/piao.js"></script><script src="/js/activate-power-mode.js"></script><script>POWERMODE.colorful = true; // make power mode colorful
POWERMODE.shake = true; // turn off shake
document.body.addEventListener('input', POWERMODE);
</script><script src="/js/tw_cn.js"></script><script>translateInitilization()

</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page@1.2.2/instantpage.min.js" type="module"></script><script src="https://cdn.jsdelivr.net/npm/lozad/dist/lozad.min.js"></script><script>const observer = lozad(); // lazy loads elements with default selector as '.lozad'
observer.observe();</script><div class="search-dialog" id="local-search"><div class="search-dialog__title" id="local-search-title">æœç´¢</div><div id="local-input-panel"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="æœç´¢æ–‡ç« "></div></div></div><hr><div id="local-search-results"><div id="local-hits"></div><div id="local-stats"><div class="local-search-stats__hr" id="hr"><span>ç”±</span> <a href="https://github.com/wzpan/hexo-generator-search" style="color:#49B1F5;">hexo-generator-search</a>
 <span>æä¾›æ”¯æŒ</span></div></div></div><span class="search-close-button"><i class="fa fa-times"></i></span></div><div class="search-mask"></div></body></html>